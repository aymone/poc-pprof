# Profiling in go
How use pprof to profile memory and cpu

## cpu

SVG

```cmd
go test -run=xxx -bench=. -cpuprofile cpu.out
go tool pprof -svg cpu.out > cpu.svg
```

pprof interative mode for cpu

```cmd
go tool pprof poc-pprof.test cpu.out
top
```

## memory

SVG

```cmd
go test -run=xxx -bench=. -memprofile mem.out
go tool pprof -svg mem.out > mem.svg
```

pprof interative mode for memory

```cmd
# memory (pprof interative mode)
go tool pprof poc-pprof.test mem.out
top
```

## pure assembly code generated by test

```cmd
go tool objdump poc-pprof.test > profile.asm
```

### References

 https://scene-si.org/2017/06/06/benchmarking-go-programs/

 https://github.com/google/pprof